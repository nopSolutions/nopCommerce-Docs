---
title: কিভাবে নপকমার্স এর জন্য প্লাগইন লিখব
uid: bn/developer/plugins/how-to-write-plugin-4.00
author: git.AndreiMaz
contributors: git.AfiaKhanom
---

# কিভাবে নপকমার্স ৪.০০ এর জন্য প্লাগইন লিখব

> কম্পিউটিংয়ে, একটি প্লাগ-ইন (বা প্লাগইন) হল সফটওয়্যার উপাদানগুলির একটি সেট যা একটি বড় সফ্টওয়্যার অ্যাপ্লিকেশন (উইকিপিডিয়া) -এ নির্দিষ্ট ক্ষমতা যোগ করে।

প্লাগইনগুলি নপকমার্স এর কার্যকারিতা প্রসারিত করতে ব্যবহৃত হয়। নপকমার্স এর বিভিন্ন ধরণের প্লাগইন রয়েছে। উদাহরণস্বরূপ, পেমেন্ট পদ্ধতি (যেমন পেপাল), কর প্রদানকারী, শিপিং পদ্ধতি গণনা পদ্ধতি (যেমন ইউপিএস, ইউএসপি, ফেডেক্স), উইজেট (যেমন 'লাইভ চ্যাট' ব্লক) এবং আরও অনেকগুলি। নপকমার্স ইতিমধ্যেই বিভিন্ন প্লাগইন দিয়ে বিতরণ করা হয়েছে। আপনি [nopCommerce official site](https://www.nopcommerce.com/marketplace) এ বিভিন্ন প্লাগইন সার্চ করে দেখতে পারেন যে কেউ ইতিমধ্যে আপনার প্রয়োজন অনুসারে প্লাগইন তৈরি করেছে কিনা। যদি তা না হয় তবে এই নিবন্ধটি আপনাকে আপনার নিজস্ব প্লাগইন তৈরির প্রক্রিয়ার মাধ্যমে নির্দেশনা দেবে।
প্লাগইনগুলি নপকমার্স এর কার্যকারিতা প্রসারিত করতে ব্যবহৃত হয়। নপকমার্স এর বিভিন্ন ধরণের প্লাগইন রয়েছে। উদাহরণস্বরূপ, পেমেন্ট পদ্ধতি (যেমন পেপাল), কর প্রদানকারী, শিপিং পদ্ধতি গণনা পদ্ধতি (যেমন ইউপিএস, ইউএসপি, ফেডেক্স), উইজেট (যেমন 'লাইভ চ্যাট' ব্লক) এবং আরও অনেকগুলি।

## প্লাগইন গঠন, প্রয়োজনীয় ফাইল এবং লোকেশন

১. প্রথমে আপনাকে যা করতে হবে তা হল সমাধানের মধ্যে একটি নতুন *`ক্লাস লাইব্রেরি`* প্রকল্প তৈরি করা। আপনার সমাধানের মূলে সমস্ত প্লাগইনগুলিকে `\Plugins` ডিরেক্টরিতে স্থাপন করা একটি ভাল অভ্যাস (`\Nop.Web` ডিরেক্টরিতে অবস্থিত `\Plugins` সাবডিরেক্টরিতে মিশে না যা ইতিমধ্যে নিযুক্ত প্লাগইনগুলির জন্য ব্যবহৃত হয়)। সমস্ত প্লাগইনগুলিকে `Plugins` সমাধান ফোল্ডারে স্থাপন করা একটি ভাল অভ্যাস (আপনি সমাধান ফোল্ডার সম্পর্কে আরও তথ্য পেতে পারেন [এখানে](http://msdn.microsoft.com/library/sx2027y2.aspx))।

একটি প্লাগইন প্রকল্পের জন্য প্রস্তাবিত নাম হল **`Nop.Plugin.{Group}.{Name}`**। **`{Group}`** আপনার প্লাগইন গ্রুপ (উদাহরণস্বরূপ,*পেমেন্ট*অথবা*শিপিং*)। **`{Name}`** আপনার প্লাগইন নাম (উদাহরণস্বরূপ,*পেপ্যাল স্ট্যান্ডার্ড*)। উদাহরণস্বরূপ, পেপ্যাল স্ট্যান্ডার্ড পেমেন্ট প্লাগইনটির নিম্নলিখিত নাম রয়েছে: **`Nop.Plugin.Payments.PayPalStandard`**। কিন্তু দয়া করে নোট করুন যে এটি একটি প্রয়োজনীয়তা নয়। এবং আপনি একটি প্লাগইন এর জন্য যেকোনো নাম নির্বাচন করতে পারেন। উদাহরণস্বরূপ, `MyGreatPlugin`।

![p1](_static/how-to-write-plugin-4.00/write_plugin_4.00_1.jpg)

২. একবার প্লাগইন প্রজেক্ট তৈরি হয়ে গেলে আপনাকে তার `.csproj` ফাইলটি যেকোন টেক্সট এডিটরে খুলতে হবে এবং এর বিষয়বস্তু নিচের একটি দিয়ে প্রতিস্থাপন করতে হবে:

```xml
    <Project Sdk="Microsoft.NET.Sdk">
     <PropertyGroup>
       <TargetFramework>net461</TargetFramework>
     </PropertyGroup>
     <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Release|AnyCPU'">
       <OutputPath>..\..\Presentation\Nop.Web\Plugins\PLUGIN_OUTPUT_DIRECTORY</OutputPath>
       <OutDir>$(OutputPath)</OutDir>
     </PropertyGroup>
     <PropertyGroup Condition="'$(Configuration)|$(Platform)'=='Debug|AnyCPU'">
       <OutputPath>..\..\Presentation\Nop.Web\Plugins\PLUGIN_OUTPUT_DIRECTORY</OutputPath>
       <OutDir>$(OutputPath)</OutDir>
     </PropertyGroup>
     <!-- This target execute after "Build" target -->
     <Target Name="NopTarget" AfterTargets="Build">
       <!-- Delete unnecessary libraries from plugins path -->
       <MSBuild Projects="$(MSBuildProjectDirectory)\..\..\Build\ClearPluginAssemblies.proj"    Properties="PluginPath=$(MSBuildProjectDirectory)\$(OutDir)" Targets="NopClear" />
     </Target>
    </Project>
```

যেখানে **PLUGIN_OUTPUT_DIRECTORY** প্লাগইন নাম দিয়ে প্রতিস্থাপন করা উচিত, উদাহরণস্বরূপ, `Payments.PayPalStandard`।
  
.NET Core-এ চালু করা তৃতীয় পক্ষের রেফারেন্স যোগ করার জন্য আমরা একটি নতুন পদ্ধতি ব্যবহার করতে সক্ষম হবার জন্য এটি করি। কিন্তু আসলে এটি প্রয়োজন হয় না। তাছাড়া, ইতিমধ্যে রেফারেন্সকৃত লাইব্রেরি থেকে রেফারেন্স স্বয়ংক্রিয়ভাবে লোড হবে। সুতরাং এটি খুব সুবিধাজনক।

৩. পরবর্তী ধাপ হল প্রতিটি প্লাগইন এর জন্য প্রয়োজনীয় একটি `plugin.json` ফাইল তৈরি করা। এই ফাইলটিতে আপনার প্লাগইন বর্ণনা করে মেটা তথ্য রয়েছে। শুধু অন্য কোন বিদ্যমান প্লাগইন থেকে এই ফাইলটি অনুলিপি করুন এবং আপনার প্রয়োজনের জন্য এটি পরিবর্তন করুন। `Plugin.json` ফাইল সম্পর্কে তথ্যের জন্য, দয়া করে [plugin.json](xref:bn/developer/plugins/plugin_json) ফাইল দেখুন।

৪. সর্বশেষ প্রয়োজনীয় পদক্ষেপ হল একটি শ্রেণী তৈরি করা যা **`IPlugin`** ইন্টারফেস (`Nop.Core.Plugins` namespace) প্রয়োগ করে। নপকমার্স এর **`BasePlugin`** ক্লাস আছে যা ইতিমধ্যে কিছু `IPlugin` পদ্ধতি প্রয়োগ করে এবং আপনাকে সোর্স কোডের নকল এড়াতে দেয়। নপকমার্স আপনাকে `IPlugin` থেকে প্রাপ্ত কিছু নির্দিষ্ট ইন্টারফেস প্রদান করে। উদাহরণস্বরূপ, আমাদের `IPaymentMethod` ইন্টারফেস আছে যা নতুন পেমেন্ট পদ্ধতি প্লাগইন তৈরিতে ব্যবহৃত হয়। এতে কিছু পদ্ধতি রয়েছে যা শুধুমাত্র পেমেন্ট পদ্ধতির জন্য নির্দিষ্ট যেমন *`ProcessPayment ()`* অথবা *`GetAdditionalHandlingFee ()`*। বর্তমানে নপকমার্স এর নিম্নলিখিত নির্দিষ্ট প্লাগইন ইন্টারফেস রয়েছে:

   - **IPaymentMethod**. এই প্লাগইনগুলি পেমেন্ট প্রক্রিয়াকরণের জন্য ব্যবহৃত হয়।
   - **IShippingRateComputationMethod**. এই প্লাগইনগুলি গ্রহণযোগ্য ডেলিভারি পদ্ধতি এবং উপযুক্ত শিপিং হার পুনরুদ্ধারের জন্য ব্যবহৃত হয়। 
   যেমন, UPS, UPS, FedEx ইত্যাদি।
   - **IPickupPointProvider**. এই প্লাগইনগুলি পিকআপ পয়েন্ট প্রদানের জন্য ব্যবহৃত হয়।
   - **ITaxProvider**. কর প্রদানকারীরা করের হার পাওয়ার জন্য ব্যবহার করা হয়।
   - **IExchangeRateProvider**. মুদ্রা বিনিময় হার পেতে ব্যবহৃত।
   - **IDiscountRequirementRule**. আপনাকে নতুন ছাড়ের নিয়ম তৈরি করতে দেয় যেমন "গ্রাহকের বিলিং দেশ হওয়া উচিত ..."
   - **IExternalAuthenticationMethod**. বাহ্যিক প্রমাণীকরণ পদ্ধতি যেমন ফেসবুক, টুইটার, ওপেনআইডি ইত্যাদি তৈরিতে ব্যবহৃত হয়।
   - **IWidgetPlugin**. এটি আপনাকে উইজেট তৈরি করতে দেয়। আপনার সাইটের কিছু অংশে উইজেট রেন্ডার করা হয়। উদাহরণস্বরূপ, এটি আপনার সাইটের বাম কলামে একটি "লাইভ চ্যাট" ব্লক হতে পারে।
   - **IMiscPlugin**. যদি আপনার প্লাগইন উপরের কোন ইন্টারফেসের সাথে মানানসই না হয়।

> [!IMPORTANT]
> গুরুত্বপূর্ণ নোট: প্রতিটি প্রকল্প তৈরির পরে, পরিবর্তন করার আগে সমাধানটি পরিষ্কার করুন। কিছু সম্পদ ক্যাশে করা হবে এবং ডেভেলপার পাগলামি হতে পারে।

## অনুরোধগুলি পরিচালনা করা। কন্ট্রোলার, মডেল এবং ভিউ

এখন আপনি **Admin area → Configuration → Local Plugins** এ গিয়ে প্লাগইন দেখতে পারেন। কিন্তু আপনি যেমন অনুমান করেছেন আমাদের প্লাগইন কিছুই করে না। এটির কনফিগারেশনের জন্য ইউজার ইন্টারফেসও নেই। প্লাগইন কনফিগার করার জন্য একটি পৃষ্ঠা তৈরি করা যাক।

আমাদের এখন যা করতে হবে তা হল একটি কন্ট্রোলার, একটি মডেল এবং একটি ভিউ তৈরি করা।

- একটি ASP.NET MVC ওয়েবসাইটের বিরুদ্ধে করা অনুরোধের সাড়া দেওয়ার জন্য MVC কন্ট্রোলার দায়ী। প্রতিটি ব্রাউজারের অনুরোধ একটি নির্দিষ্ট নিয়ামককে ম্যাপ করা হয়।

- একটি ভিউতে HTML মার্কআপ এবং সামগ্রী রয়েছে যা ব্রাউজারে পাঠানো হয়। একটি `ASP.NET MVC` অ্যাপ্লিকেশনের সাথে কাজ করার সময় একটি ভিউ একটি পৃষ্ঠার সমতুল্য।

- একটি MVC মডেলে আপনার সমস্ত অ্যাপ্লিকেশন যুক্তি রয়েছে যা একটি ভিউ বা কন্ট্রোলার নয়।
আপনি MVC প্যাটার্ন সম্পর্কে আরও তথ্য পেতে পারেন [here](http://www.asp.net/mvc/tutorials/older-versions/overview/understanding-models-views-and-controllers-cs).

সুতরাং শুরু করি:

- **মডেল তৈরি করুন**। নতুন প্লাগিনে একটি **মডেল** ফোল্ডার যোগ করুন, এবং তারপর আপনার প্রয়োজন অনুসারে একটি নতুন মডেল ক্লাস যোগ করুন।
- **ভিউ তৈরি করুন**। নতুন প্লাগিনে একটি **ভিউস** ফোল্ডার যোগ করুন, এবং তারপর `Configure.cshtml` নামে একটি cshtml ফাইল যোগ করুন। ভিউ ফাইলের **"Build Action"** প্রপার্টি সেট করুন **"Content"**, এবং **"Copy to Output Directory"** প্রোপার্টি **"Copy if newer"** সেট করা হয়েছে। মনে রাখবেন যে কনফিগারেশন পৃষ্ঠায় `_ConfigurePlugin` লেআউট ব্যবহার করা উচিত। এছাড়াও আপনার `\Views` ডিরেক্টরিতে `_ViewImports.cshtml` ফাইল আছে তা নিশ্চিত করুন। আপনি শুধু অন্য কোন বিদ্যমান প্লাগইন থেকে এটি অনুলিপি করতে পারেন।
- **কন্ট্রোলার তৈরি করুন**। নতুন প্লাগিনে একটি **কন্ট্রোলার** ফোল্ডার যোগ করুন, এবং তারপর একটি নতুন কন্ট্রোলার ক্লাস যোগ করুন। একটি ভাল অভ্যাস হল প্লাগইন কন্ট্রোলারদের নাম দেওয়া `{Group}{Name}Controller.cs`। উদাহরণস্বরূপ, PaymentPayPalStandardController। অবশ্যই এইভাবে কন্ট্রোলারের নাম দেওয়ার প্রয়োজন নেই (তবে কেবল একটি সুপারিশ)। তারপরে কনফিগারেশন পৃষ্ঠার জন্য একটি উপযুক্ত কর্ম পদ্ধতি তৈরি করুন (অ্যাডমিন এলাকায়)। এর নাম দিন *কনফিগার*। একটি মডেল শ্রেণী প্রস্তুত করুন এবং একটি ভিজ্যুয়াল ভিউ পাথ ব্যবহার করে নিম্নলিখিত ভিউতে পাঠান: - `~/Plugins/{PluginOutputDirectory}/Views/Configure.cshtml`।
- আপনার কর্ম পদ্ধতির জন্য নিম্নলিখিত বৈশিষ্ট্যগুলি ব্যবহার করুন:

    ```csharp
        [AuthorizeAdmin] //confirms access to the admin panel
        [Area(AreaNames.Admin)] //specifies the area containing a controller or action
    ```

    উদাহরণস্বরূপ, `PayPalStandard` পেমেন্ট প্লাগইনটি খুলুন এবং `PaymentPayPalStandardController` এর বাস্তবায়ন দেখুন।

তারপরে প্রতিটি প্লাগইন যার একটি কনফিগারেশন পৃষ্ঠা রয়েছে তার জন্য আপনাকে একটি কনফিগারেশন ইউআরএল নির্দিষ্ট করতে হবে। `BasePlugin` নামের বেস ক্লাসে `GetConfigurationPageUrl` পদ্ধতি আছে যা একটি কনফিগারেশন ইউআরএল প্রদান করে:

```csharp
    return $"{_webHelper.GetStoreLocation()}Admin/ControllerName/ActionName";
```

যেখানে **ControllerName** আপনার নিয়ামকের একটি নাম এবং **ActionName** হল একটি কর্মের নাম (সাধারণত এটি `কনফিগার`)।

একবার আপনি আপনার প্লাগইন ইন্সটল করে কনফিগারেশন পদ্ধতি যোগ করলে আপনি **Admin → Configuration → Plugins** এর অধীনে কনফিগার করার জন্য একটি লিঙ্ক পাবেন।

> [!TIP]
> উপরে বর্ণিত ধাপগুলি সম্পূর্ণ করার সবচেয়ে সহজ উপায় হল অন্য কোন প্লাগইন খুলে এই ফাইলগুলিকে আপনার প্লাগইন প্রকল্পে অনুলিপি করা। তারপরে কেবল উপযুক্ত ক্লাস এবং ডিরেক্টরিগুলির নাম পরিবর্তন করুন।

উদাহরণস্বরূপ, *PayPalStandard* প্লাগইন এর প্রজেক্ট গঠন নিচের ছবির মত দেখাচ্ছে:

![p3](_static/how-to-write-plugin-4.00/write_plugin_4.00_3.jpg)

## "Install" এবং "Uninstall" পদ্ধতিগুলি পরিচালনা করা

এই পদক্ষেপটি ঐচ্ছিক। কিছু প্লাগইন প্লাগইন ইনস্টলেশনের সময় অতিরিক্ত যুক্তির প্রয়োজন হতে পারে। উদাহরণস্বরূপ, একটি প্লাগইন নতুন লোকেল সম্পদ সন্নিবেশ করতে পারে। সুতরাং আপনার `IPlugin` বাস্তবায়ন খুলুন (বেশিরভাগ ক্ষেত্রে এটি `BasePlugin` শ্রেণী থেকে উদ্ভূত হবে) এবং নিম্নলিখিত পদ্ধতিগুলি ওভাররাইড করুন:

- **Install**. প্লাগইন ইনস্টলেশনের সময় এই পদ্ধতিটি চালু হয়। আপনি এখানে যেকোনো সেটিংস শুরু করতে পারেন, নতুন লোকাল রিসোর্স সন্নিবেশ করতে পারেন, অথবা কিছু নতুন ডাটাবেস টেবিল তৈরি করতে পারেন (প্রয়োজন হলে)।

- **Uninstall**. প্লাগইন আনইনস্টল করার সময় এই পদ্ধতিটি চালু হয়।

> [!IMPORTANT]
> আপনি যদি এই পদ্ধতিগুলির মধ্যে একটিকে ওভাররাইড করেন তবে এর ভিত্তি বাস্তবায়ন গোপন করবেন না।

উদাহরণস্বরূপ, ওভাররাইড করা  `Install` পদ্ধতিতে নিম্নলিখিত পদ্ধতি কল অন্তর্ভুক্ত করা উচিত: *`base.Install()`*। *PayPalStandard* প্লাগইন এর `Install` পদ্ধতিটি নিচের কোডের মত দেখায়

```csharp
    public override void Install()
    {
        var settings = new PayPalStandardPaymentSettings()
        {
            UseSandbox = true
        };
        _settingService.SaveSetting(settings);
        base.Install();
    }
```

> [!TIP]
>ইনস্টল করা প্লাগইনগুলির তালিকা `\App_Data\installedPlugins.json` তে অবস্থিত। ইনস্টলেশনের সময় তালিকা তৈরি করা হয়।

## রুটস

এখানে আমরা প্লাগইন রুটগুলি কীভাবে নিবন্ধন করব তার দিকে নজর দেব। ASP.NET Core রাউটিং নির্দিষ্ট MVC কন্ট্রোলার ক্রিয়ায় ইনকামিং ব্রাউজার অনুরোধ ম্যাপ করার জন্য দায়ী। আপনি রাউটিং সম্পর্কে আরও তথ্য পেতে পারেন [এখানে](https://docs.microsoft.com/aspnet/core/fundamentals/routing)। সুতরাং পরবর্তী পদক্ষেপগুলি অনুসরণ করুন:

- যদি আপনি কিছু কাস্টম রুট যোগ করতে চান, তাহলে `RouteProvider.cs` ফাইল তৈরি করুন। এটি নপকমার্স সিস্টেমকে প্লাগইন রুট সম্পর্কে অবহিত করে। উদাহরণস্বরূপ, নিচের `RouteProvider` ক্লাসটি একটি নতুন রুট যোগ করে যা আপনার ওয়েব ব্রাউজার খুলে এবং `http: // www.yourStore.com/Plugins/PaymentPayPalStandard/PDTHandler` ইউআরএল ( *PayPal* প্লাগইন দ্বারা ব্যবহৃত ):

    ```csharp
        public partial class RouteProvider : IRouteProvider
        {
            public void RegisterRoutes(IRouteBuilder routeBuilder)
            {
                 routeBuilder.MapRoute("Plugin.Payments.PayPalStandard.PDTHandler", "Plugins/   PaymentPayPalStandard/PDTHandler",
                 new { controller = "PaymentPayPalStandard", action = "PDTHandler" });
            }
            public int Priority
            {
                get
                {
                    return -1;
                }
            }
        }
    ```

## নপকমার্স আপগ্রেড করলে প্লাগইন ভেঙ্গে যেতে পারে

কিছু প্লাগইন পুরনো হয়ে যেতে পারে এবং নপকমার্স এর নতুন সংস্করণের সাথে আর কাজ করবে না। নতুন সংস্করণে আপগ্রেড করার পরে যদি আপনার সমস্যা হয়, তাহলে প্লাগইনটি মুছুন এবং একটি নতুন সংস্করণ পাওয়া যায় কিনা তা দেখতে অফিসিয়াল নপকমার্স ওয়েবসাইটে যান। অনেক প্লাগইন লেখক নতুন সংস্করণকে সামঞ্জস্য করতে তাদের প্লাগইনগুলি আপগ্রেড করবে, তবে কেউ কেউ করবে না এবং তাদের প্লাগইন নপকমার্সের উন্নতির সাথে অপ্রচলিত হয়ে যাবে। তবে বেশিরভাগ ক্ষেত্রে, আপনি কেবল একটি উপযুক্ত `plugin.json` ফাইল খুলতে পারেন এবং **SupportedVersions** ক্ষেত্র আপডেট করতে পারেন।

## উপসংহার

আশা করি এটি আপনাকে নপকমার্স দিয়ে শুরু করবে এবং আপনাকে আরও বিস্তৃত প্লাগইন তৈরির জন্য প্রস্তুত করবেন।
